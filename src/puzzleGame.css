/* Estilos básicos para carga y error */
.puzzle-loading,
.puzzle-error {
  padding: 20px;
  text-align: center;
  font-style: italic;
  color: #555;
}
.puzzle-error {
  color: red;
  font-weight: bold;
}

/* Contenedor principal del puzzle */
.puzzle-container {
  position: relative; /* Necesario para posicionar elementos absolutos hijos */
  display: grid; /* Usamos grid para las piezas */
  /* El tamaño y grid-template-columns se establecen inline */
  border: 1px solid #ccc;
  overflow: hidden; /* Evita desbordamientos visuales */
  background-color: #f0f0f0; /* Fondo mientras carga o si falla algo */
}

/* Estilos para cada pieza del puzzle */
.puzzle-piece {
  /* El tamaño (width, height) se establece inline */
  /* backgroundImage, backgroundPosition, backgroundSize se establecen inline */
  border: 1px solid rgba(200, 200, 200, 0.2); /* Borde muy sutil entre piezas */
  background-repeat: no-repeat;
  box-sizing: border-box;
  transition: transform 0.15s ease-out, box-shadow 0.15s ease-out;
  user-select: none; /* Evitar selección de texto */
  touch-action: none; /* Previene acciones táctiles por defecto del navegador (scroll/zoom) en esta pieza */
}

/* Estilo cuando una pieza está siendo arrastrada */
.puzzle-piece[draggable="true"]:active {
    cursor: grabbing !important; /* Cursor de "agarrando" */
    opacity: 0.7;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    transform: scale(1.08); /* Hacerla un poco más grande */
    z-index: 10; /* Asegurar que esté por encima de otras piezas */
}

/* Estilo cuando el puzzle está resuelto */
.puzzle-piece.solved {
  border-color: transparent; /* Ocultar bordes */
  cursor: default !important; /* Cursor normal */
}

/* Superposición de líneas de puzzle */
.puzzle-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  /* backgroundImage se establece inline */
  background-size: cover; /* Ajusta la imagen de superposición */
  pointer-events: none; /* Permite interactuar con las piezas debajo */
  z-index: 1; /* Encima de las piezas base, debajo de la pieza arrastrada */
  opacity: 0.6; /* Hacerla semi-transparente */
}

/* Mensaje de completado */
.puzzle-complete-message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(28, 184, 65, 0.85); /* Verde éxito con transparencia */
    color: white;
    padding: 12px 25px;
    border-radius: 6px;
    font-size: 1.3em;
    font-weight: bold;
    z-index: 20; /* Por encima de todo */
    text-align: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}